const z=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&h(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function h(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}};z();const k="modulepreload",g={},P="",d=function(i,t){return!t||t.length===0?i():Promise.all(t.map(h=>{if(h=`${P}${h}`,h in g)return;g[h]=!0;const s=h.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${r}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":k,s||(a.as="script",a.crossOrigin=""),a.href=h,document.head.appendChild(a),s)return new Promise((m,u)=>{a.addEventListener("load",m),a.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${h}`)))})})).then(()=>i())};class c{constructor(i,t,h,s=2,r=.001){this.ctx=i,this.x=t||this.ctx.random(this.ctx.width),this.y=h||this.ctx.random(this.ctx.height),this.noiseOffsetX=this.ctx.random(1e3),this.noiseOffsetY=this.ctx.random(1e3),this.speed=s,this.noiseSpeed=r,this.sprite=new i.Sprite(this.x,this.y,20)}move(){this.x+=this.ctx.map(this.ctx.noise(this.noiseOffsetX),0,1,-this.speed,this.speed),this.y+=this.ctx.map(this.ctx.noise(this.noiseOffsetY),0,1,-this.speed,this.speed),this.noiseOffsetX+=this.noiseSpeed,this.noiseOffsetY+=this.noiseSpeed,this.x<0&&(this.x=this.ctx.width),this.x>this.ctx.width&&(this.x=0),this.y<0&&(this.y=this.ctx.height),this.y>this.ctx.height&&(this.y=0)}display(){this.sprite.x=this.x,this.sprite.y=this.y}touches(i){return this.ctx.dist(this.x,this.y,i.x,i.y)<20}proximityTo(i){return this.ctx.dist(this.x,this.y,i.x,i.y)}}class v extends c{constructor(i,t,h,s){super(i,t,h,null,null),this.livesMax=s,this.reset(),this.x=t||this.x,this.y=h||this.y,this.sprites={normal:"\u{1F432}",invulnerable:"\u{1F911}"},this.sprite.image=this.sprites.normal}reset(){this.x=this.ctx.width/2,this.y=this.ctx.height/2,this.lives=this.livesMax,this.invulnerable=!1}move(){this.ctx.keyIsDown(this.ctx.LEFT_ARROW)&&(this.x-=5),this.ctx.keyIsDown(this.ctx.RIGHT_ARROW)&&(this.x+=5),this.ctx.keyIsDown(this.ctx.UP_ARROW)&&(this.y-=5),this.ctx.keyIsDown(this.ctx.DOWN_ARROW)&&(this.y+=5),this.x<0&&(this.x=this.ctx.width),this.x>this.ctx.width&&(this.x=0),this.y<0&&(this.y=this.ctx.height),this.y>this.ctx.height&&(this.y=0)}killed(){this.lives--,this.invulnerable=!0,this.sprite.image=this.sprites.invulnerable,setTimeout(()=>{this.sprite.image=this.sprites.normal,this.invulnerable=!1},2e3)}}class p extends c{constructor(i,t,h,s,r){super(i,t,h,s,r),this.x=this.ctx.random(this.ctx.width),this.y=this.ctx.random(this.ctx.height),this.sprite.text="\u272D",this.sprite.textSize=20,this.sprite.textColor="yellow",this.sprite.color="olive"}move(i,t){if(super.move(),this.proximityTo(i)<200){let h=this.ctx.atan2(i.y-this.y,i.x-this.x);this.x+=this.ctx.cos(h)*2,this.y+=this.ctx.sin(h)*2}for(let h of t)if(this.proximityTo(h)<200){let s=this.ctx.atan2(this.y-h.y,this.x-h.x);this.x-=this.ctx.cos(s)*2,this.y-=this.ctx.sin(s)*2;break}}}class x extends c{constructor(i,t,h,s,r){return super(i,t,h,s,r),this.sprite.text="\u{1F922}",this.sprite.textSize=20,this.sprite.textColor="white",this.sprite.color="blue",this}move(i,t,h){super.move();for(let s of i)if(this.proximityTo(s)<50){let r=this.ctx.atan2(this.y-s.y,this.x-s.x);this.x+=this.ctx.cos(r)*2,this.y+=this.ctx.sin(r)*2;break}for(let s of h)if(this.proximityTo(s)<50){let r=this.ctx.atan2(this.y-s.y,this.x-s.x);this.x+=this.ctx.cos(r)*2,this.y+=this.ctx.sin(r)*2;break}for(let s of t)if(this.proximityTo(s)<100){let r=this.ctx.atan2(s.y-this.y,s.x-this.x);this.x+=this.ctx.cos(r)*3,this.y+=this.ctx.sin(r)*3;break}}}class f extends c{constructor(i,t,h,s,r){super(i,t,h,s,r),this.sprite.image="\u{1F603}"}move(i,t){super.move(),this.x+=this.ctx.map(this.ctx.noise(this.noiseOffsetX),0,1,-2,2),this.y+=this.ctx.map(this.ctx.noise(this.noiseOffsetY),0,1,-2,2),this.noiseOffsetX+=.001,this.noiseOffsetY+=.001,this.x<0&&(this.x=this.ctx.width),this.x>this.ctx.width&&(this.x=0),this.y<0&&(this.y=this.ctx.height),this.y>this.ctx.height&&(this.y=0);for(let h of i)if(this.ctx.dist(this.x,this.y,h.x,h.y)<50){this.x+=(this.x-h.x)*.05,this.y+=(this.y-h.y)*.05;break}this.ctx.dist(this.x,this.y,t.x,t.y)<50&&(this.x+=(this.x-t.x)*.05,this.y+=(this.y-t.y)*.05)}display(){this.sprite.x=this.x,this.sprite.y=this.y}}class w extends c{constructor(i,t,h,s,r){super(i,t,h,s,r),this.x=this.ctx.random(this.ctx.width),this.y=this.ctx.random(this.ctx.height),this.sprite.image="\u26D1",this.waiting=!1}move(i){if(!this.waiting){super.move();for(let t of i)if(this.proximityTo(t)<100){let h=this.ctx.atan2(this.y-t.y,this.x-t.x);this.x-=this.ctx.cos(h)*5,this.y-=this.ctx.sin(h)*5;break}}}wait(){this.waiting=!0,setTimeout(()=>this.waiting=!1,3e3)}}await d(()=>import("./index.db9e016b.js"),["assets/index.db9e016b.js","assets/_commonjsHelpers.88e99c8f.js"]);window.planck=await d(()=>import("./planck.21b3dc8b.js"),[]);await d(()=>import("./p5play.eb70780b.js").then(function(e){return e.p}),["assets/p5play.eb70780b.js","assets/_commonjsHelpers.88e99c8f.js"]);await d(()=>import("./sound.a1c9346d.js"),[]);let l={},y=[];new p5(e=>{e.preload=()=>{l.scream=e.loadSound("audio/64940__syna-max__wilhelm_scream.wav"),l.gunshot=e.loadSound("audio/128297__xenonn__layered-gunshot-7.wav"),l.crunch=e.loadSound("audio/524609__clearwavsound__bone-crunch.wav"),l.thing=e.loadSound("audio/425941__jarethorin__loopy-thing.wav"),l.heal=e.loadSound("audio/578581__nomiqbomi__tremolo-strings-2.mp3"),l.nomnom=e.loadSound("audio/543386__thedragonsspark__nom-noise.wav"),l.bite=e.loadSound("audio/353067__jofae__bite-cartoon-style.mp3"),l.nom=e.loadSound("audio/nom.smaller.mp3"),l.bell=e.loadSound("audio/taco-bell-bong-sfx-120135.mp3")};const i={HELP:"help",PLAYING:"playing",PAUSED:"paused",GAME_OVER:"game over",ATTRACT:"attract"};let t={mode:i.ATTRACT,previousMode:i.ATTRACT,score:0,level:0,livesMax:3,painted:!1,humans:[],zombies:[],doctors:[],soldiers:[],player:null,gameObjs:[],doctorLimit:1,humanLimit:12,soldierLimit:2,helpObjs:[]};function h(){t.gameObjs=[t.humans,t.zombies,t.doctors,t.soldiers],t.gameObjs.forEach(o=>o.forEach(n=>n.sprite.remove())),t.humans=[],t.zombies=[],t.soldiers=[],t.doctors=[];for(let o=0;o<t.humanLimit;o++)t.humans.push(new f(e,null,null));for(let o=0;o<t.soldierLimit;o++)t.soldiers.push(new p(e,null,null,-2.5,.02));for(let o=0;o<t.doctorLimit;o++)t.doctors.push(new w(e,null,null,-2.5,.001));t.level++,t.level%2===0&&(t.soldierLimit++,t.humanLimit+=2),t.gameObjs=[t.humans,t.zombies,t.doctors,t.soldiers]}function s(){t.level=0,t.score=0,h(),t.player=new v(e,null,null,t.livesMax),t.mode=i.PLAYING,l.thing&&(l.thing.setVolume(1),l.thing.loop())}function r(){e.fill(0),e.textSize(24),e.textAlign(e.LEFT),e.text("Score: "+t.score,10,30),e.text("Round: "+t.level,10,60),e.text(`Lives: ${t.player.lives}`,10,90)}function a(){if(t.painted=!1,e.background(220),t.player.move(),t.player.display(),t.player.lives<=0){t.mode=i.GAME_OVER,l.scream.play();return}for(let o of t.humans)o.move(t.zombies,t.player),o.display(),t.player.touches(o)&&(l.bite.play(),o.sprite.remove(),t.zombies.push(new x(e,o.x,o.y)),t.humans.splice(t.humans.indexOf(o),1),t.score++);for(let o of t.zombies){o.move(t.soldiers,t.humans,t.doctors),o.display();for(let n of t.humans)o.touches(n)&&(l.nomnom.play(),n.sprite.remove(),t.zombies.push(new x(e,n.x,n.y)),t.humans.splice(t.humans.indexOf(n),1))}for(let o of t.soldiers){o.move(t.player,t.zombies),o.display(),o.touches(t.player)&&!t.player.invulnerable&&(t.player.killed(),l.gunshot.play());for(let n of t.zombies)o.touches(n)&&(l.gunshot.play(),n.sprite.remove(),t.zombies.splice(t.zombies.indexOf(n),1))}for(let o of t.doctors){o.move(t.zombies),o.display();for(let n of t.zombies)!o.waiting&&o.touches(n)&&(o.wait(),l.heal.play(),n.sprite.remove(),t.humans.push(new f(e,n.x,n.y)),t.zombies.splice(t.zombies.indexOf(n),1))}t.humans.length===0&&(l.bell.play(),h()),r()}e.setup=()=>{let o=e.createCanvas(600,600);e.frameRate(30),e.noStroke(),e.textStyle(e.BOLD);let n=e.createButton("Start");n.position(o.offsetLeft,o.offsetTop+o.offsetHeight+10),n.mousePressed(s)},e.mousePressed=()=>{t.mode===i.ATTRACT&&s()};function m(){e.kb.pressed("p")||e.kb.pressed(" ")?t.mode===i.PLAYING?u():t.mode===i.PAUSED&&_():e.kb.pressed("h")?t.mode===i.HELP?(t.mode=t.previousMode,A()):(t.previousMode=t.mode,t.mode=i.HELP,t.painted=!1):t.mode===i.GAME_OVER&&s()}const u=()=>{t.mode=i.PAUSED},_=()=>{t.mode=i.PLAYING,t.painted=!1},E=()=>{t.gameObjs.forEach(o=>o.forEach(n=>n.sprite.visible=!1)),t.player.sprite.visible=!1},O=()=>{t.gameObjs.forEach(o=>o.forEach(n=>n.sprite.visible=!0)),t.player.sprite.visible=!0},S=()=>{E(),e.clear(),e.background(220),e.fill(0),e.textSize(32),e.textAlign(e.CENTER),e.text("Help",e.width/2,e.height/2);let o=new f(e,100,100),n=new p(e,100,130),T=new x(e,100,160),L=new w(e,100,190),b=new v(e,100,220);b.display(),y=[o,n,T,L,b],e.textAlign(e.LEFT),e.textSize(16),e.text("Human: tasty!",130,105),e.text("Soldier: beware!",130,135),e.text("Zombie: your babies! (you can ignore them now)",130,165),e.text("Doctor: No worries, but heals zombies back to life",130,195),e.text("Player: Move with arrow keys, bite humans, avoid soldiers",130,225),t.painted=!0},A=()=>{y.forEach(o=>o.sprite?.remove()),y=[],O(),t.painted=!1};e.draw=()=>{if(m(),t.mode===i.ATTRACT){e.background(0),e.fill(255),e.textSize(32),e.textAlign(e.CENTER),e.text("Nova Zombie Simulator",e.width/2,e.height/2),e.text("Click to Start",e.width/2,e.height/2+50);return}if(t.mode===i.PAUSED&&!t.painted){t.painted=!0,e.background(0,50),e.fill(255),e.textSize(32),e.textAlign(e.CENTER),e.text("Paused",e.width/2,e.height/2),e.text("Press 'p' or 'space' to continue",e.width/2,e.height/2+50);return}if(t.mode===i.GAME_OVER&&!t.painted){t.painted=!0,e.background(0,50),e.fill(255),e.textSize(32),e.textAlign(e.CENTER),e.text("Game Over",e.width/2,e.height/2);return}if(t.mode===i.HELP&&!t.painted){S();return}t.mode===i.PLAYING&&a()}});
