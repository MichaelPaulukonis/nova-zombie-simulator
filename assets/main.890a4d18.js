const z=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const a of h.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerpolicy&&(h.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?h.credentials="include":s.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(s){if(s.ep)return;s.ep=!0;const h=t(s);fetch(s.href,h)}};z();const R="modulepreload",_={},I="",f=function(i,t){return!t||t.length===0?i():Promise.all(t.map(o=>{if(o=`${I}${o}`,o in _)return;_[o]=!0;const s=o.endsWith(".css"),h=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${h}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":R,s||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),s)return new Promise((x,y)=>{a.addEventListener("load",x),a.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>i())};class u{constructor(i,t,o,s=2,h=.001){this.ctx=i,this.x=t||this.ctx.random(this.ctx.width),this.y=o||this.ctx.random(this.ctx.height),this.noiseOffsetX=this.ctx.random(1e3),this.noiseOffsetY=this.ctx.random(1e3),this.speed=s,this.noiseSpeed=h,this.sprite=new i.Sprite(this.x,this.y,20)}move(){this.x+=this.ctx.map(this.ctx.noise(this.noiseOffsetX),0,1,-this.speed,this.speed),this.y+=this.ctx.map(this.ctx.noise(this.noiseOffsetY),0,1,-this.speed,this.speed),this.noiseOffsetX+=this.noiseSpeed,this.noiseOffsetY+=this.noiseSpeed,this.x<0&&(this.x=this.ctx.width),this.x>this.ctx.width&&(this.x=0),this.y<0&&(this.y=this.ctx.height),this.y>this.ctx.height&&(this.y=0)}display(){this.sprite.x=this.x,this.sprite.y=this.y}touches(i){return this.ctx.dist(this.x,this.y,i.x,i.y)<20}proximityTo(i){return this.ctx.dist(this.x,this.y,i.x,i.y)}}class g extends u{constructor(i,t,o,s,h){super(i,t,o,null,null),this.livesMax=s,this.reset(),this.x=t||this.x,this.y=o||this.y,this.sprites={normal:h.normal,invulnerable:h.invuln},this.setSprite(this.sprites.normal)}setSprite(i){this.sprite.image=i,this.sprite.image.width=20,this.sprite.image.height=20}reset(){this.x=this.ctx.width/2,this.y=this.ctx.height/2,this.lives=this.livesMax,this.invulnerable=!1}move(){this.ctx.keyIsDown(this.ctx.LEFT_ARROW)&&(this.x-=5),this.ctx.keyIsDown(this.ctx.RIGHT_ARROW)&&(this.x+=5),this.ctx.keyIsDown(this.ctx.UP_ARROW)&&(this.y-=5),this.ctx.keyIsDown(this.ctx.DOWN_ARROW)&&(this.y+=5),this.x<0&&(this.x=this.ctx.width),this.x>this.ctx.width&&(this.x=0),this.y<0&&(this.y=this.ctx.height),this.y>this.ctx.height&&(this.y=0)}killed(){this.lives--,this.invulnerable=!0,this.setSprite(this.sprites.invulnerable),setTimeout(()=>{this.setSprite(this.sprites.normal),this.invulnerable=!1},2e3)}}class E extends u{constructor(i,t,o,s,h){super(i,t,o,s,h),this.x=this.ctx.random(this.ctx.width),this.y=this.ctx.random(this.ctx.height),this.sprite.text="\u272D",this.sprite.textSize=20,this.sprite.textColor="yellow",this.sprite.color="olive"}move(i,t){if(super.move(),this.proximityTo(i)<200){let o=this.ctx.atan2(i.y-this.y,i.x-this.x);this.x+=this.ctx.cos(o)*2,this.y+=this.ctx.sin(o)*2}for(let o of t.filter(s=>!s.killed))if(this.proximityTo(o)<200){let s=this.ctx.atan2(this.y-o.y,this.x-o.x);this.x-=this.ctx.cos(s)*2,this.y-=this.ctx.sin(s)*2;break}}}class p extends u{constructor(i,t,o,s,h){return super(i,t,o,s,h),this.sprites={normal:"\u{1F922}",dead:"\u{1FAA6}"},this.sprite.image=this.sprites.normal,this.killed=!1,this}kill(){this.killed=!0,this.sprite.image=this.sprites.dead}move(i,t,o){if(!this.killed){super.move();for(let s of i)if(this.proximityTo(s)<50){let h=this.ctx.atan2(this.y-s.y,this.x-s.x);this.x+=this.ctx.cos(h)*2,this.y+=this.ctx.sin(h)*2;break}for(let s of o)if(this.proximityTo(s)<50){let h=this.ctx.atan2(this.y-s.y,this.x-s.x);this.x+=this.ctx.cos(h)*2,this.y+=this.ctx.sin(h)*2;break}for(let s of t)if(this.proximityTo(s)<100){let h=this.ctx.atan2(s.y-this.y,s.x-this.x);this.x+=this.ctx.cos(h)*3,this.y+=this.ctx.sin(h)*3;break}}}}class b extends u{constructor(i,t,o,s,h){super(i,t,o,s,h),this.sprite.image="\u{1F603}"}move(i,t){super.move(),this.x+=this.ctx.map(this.ctx.noise(this.noiseOffsetX),0,1,-2,2),this.y+=this.ctx.map(this.ctx.noise(this.noiseOffsetY),0,1,-2,2),this.noiseOffsetX+=.001,this.noiseOffsetY+=.001,this.x<0&&(this.x=this.ctx.width),this.x>this.ctx.width&&(this.x=0),this.y<0&&(this.y=this.ctx.height),this.y>this.ctx.height&&(this.y=0);for(let o of i.filter(s=>!s.killed))if(this.ctx.dist(this.x,this.y,o.x,o.y)<50){this.x+=(this.x-o.x)*.05,this.y+=(this.y-o.y)*.05;break}this.ctx.dist(this.x,this.y,t.x,t.y)<50&&(this.x+=(this.x-t.x)*.05,this.y+=(this.y-t.y)*.05)}display(){this.sprite.x=this.x,this.sprite.y=this.y}}class O extends u{constructor(i,t,o,s,h){super(i,t,o,s,h),this.x=this.ctx.random(this.ctx.width),this.y=this.ctx.random(this.ctx.height),this.sprite.image="\u26D1",this.waiting=!1}move(i){if(!this.waiting){super.move();for(let t of i.filter(o=>!o.killed))if(this.proximityTo(t)<100){let o=this.ctx.atan2(this.y-t.y,this.x-t.x);this.x-=this.ctx.cos(o)*5,this.y-=this.ctx.sin(o)*5;break}}}wait(){this.waiting=!0,setTimeout(()=>this.waiting=!1,3e3)}}await f(()=>import("./index.db9e016b.js"),["assets/index.db9e016b.js","assets/_commonjsHelpers.88e99c8f.js"]);window.planck=await f(()=>import("./planck.21b3dc8b.js"),[]);await f(()=>import("./p5play.eb70780b.js").then(function(e){return e.p}),["assets/p5play.eb70780b.js","assets/_commonjsHelpers.88e99c8f.js"]);await f(()=>import("./sound.a1c9346d.js"),[]);let n={},v=[],m={};new p5(e=>{e.preload=()=>{m.player={normal:e.loadImage("images/u1f635_u1f922.png"),invuln:e.loadImage("images/u1fae5_u1f922.png")},n.scream=e.loadSound("audio/64940__syna-max__wilhelm_scream.wav"),n.gunshot=e.loadSound("audio/128297__xenonn__layered-gunshot-7.wav"),n.crunch=e.loadSound("audio/524609__clearwavsound__bone-crunch.wav"),n.thing=e.loadSound("audio/425941__jarethorin__loopy-thing.wav"),n.heal=e.loadSound("audio/578581__nomiqbomi__tremolo-strings-2.mp3"),n.nomnom=e.loadSound("audio/543386__thedragonsspark__nom-noise.wav"),n.bite=e.loadSound("audio/353067__jofae__bite-cartoon-style.mp3"),n.nom=e.loadSound("audio/nom.smaller.mp3"),n.bell=e.loadSound("audio/taco-bell-bong-sfx-120135.mp3")};const i={HELP:"help",PLAYING:"playing",PAUSED:"paused",GAME_OVER:"game over",ATTRACT:"attract"};let t={mode:i.ATTRACT,previousMode:i.ATTRACT,score:0,level:0,livesMax:3,painted:!1,humans:[],zombies:[],doctors:[],soldiers:[],player:{},gameObjs:[],doctorLimit:1,humanLimit:12,soldierLimit:2,helpObjs:[]};function o(){t.gameObjs=[t.humans,t.zombies,t.doctors,t.soldiers],t.gameObjs.forEach(r=>r.forEach(l=>l.sprite.remove())),t.humans=[],t.zombies=[],t.soldiers=[],t.doctors=[];for(let r=0;r<t.humanLimit;r++)t.humans.push(new b(e,null,null));for(let r=0;r<t.soldierLimit;r++)t.soldiers.push(new E(e,null,null,-2.5,.02));for(let r=0;r<t.doctorLimit;r++)t.doctors.push(new O(e,null,null,-2.5,.001));t.level++,t.level%2===0&&(t.soldierLimit++,t.humanLimit+=2),t.gameObjs=[t.humans,t.zombies,t.doctors,t.soldiers]}function s(){t.level=0,t.score=0,o(),t.player.sprite&&t.player.sprite.remove(),t.player=new g(e,null,null,t.livesMax,m.player),t.mode=i.PLAYING,n.thing&&(n.thing.setVolume(1),n.thing.loop())}function h(){e.fill(0),e.textSize(24),e.textAlign(e.LEFT),e.text("Score: "+t.score,10,30),e.text("Round: "+t.level,10,60),e.text(`Lives: ${t.player.lives}`,10,90)}function a(){if(t.painted=!1,e.background(220),t.player.move(),t.player.display(),t.player.lives<=0){t.mode=i.GAME_OVER,n.scream.play();return}for(let r of t.humans)r.move(t.zombies,t.player),r.display(),t.player.touches(r)&&(n.bite.play(),r.sprite.remove(),t.zombies.push(new p(e,r.x,r.y)),t.humans.splice(t.humans.indexOf(r),1),t.score++);for(let r of t.zombies){r.move(t.soldiers,t.humans,t.doctors),r.display();for(let l of t.humans)r.touches(l)&&(n.nomnom.play(),l.sprite.remove(),t.zombies.push(new p(e,l.x,l.y)),t.humans.splice(t.humans.indexOf(l),1))}for(let r of t.soldiers){r.move(t.player,t.zombies),r.display(),r.touches(t.player)&&!t.player.invulnerable&&(t.player.killed(),n.gunshot.play());for(let l of t.zombies.filter(d=>!d.killed))r.touches(l)&&(n.gunshot.play(),l.kill())}for(let r of t.doctors){r.move(t.zombies),r.display();for(let l of t.zombies.filter(d=>!d.killed))!r.waiting&&r.touches(l)&&(r.wait(),n.heal.play(),l.sprite.remove(),t.humans.push(new b(e,l.x,l.y)),t.zombies.splice(t.zombies.indexOf(l),1))}t.humans.length===0&&(n.bell.play(),o()),h()}e.setup=()=>{let r=e.createCanvas(600,600);e.frameRate(30),e.noStroke(),e.textStyle(e.BOLD);let l=e.createButton("Start");l.position(r.offsetLeft,r.offsetTop+r.offsetHeight+10),l.mousePressed(s)},e.mousePressed=()=>{t.mode===i.ATTRACT&&s()};function x(){e.kb.pressed("p")||e.kb.pressed(" ")?t.mode===i.PLAYING?y():t.mode===i.PAUSED&&S():e.kb.pressed("h")?t.mode===i.HELP?(t.mode=t.previousMode,L()):(t.previousMode=t.mode,t.mode=i.HELP,t.painted=!1):t.mode===i.GAME_OVER&&s()}const y=()=>{t.mode=i.PAUSED},S=()=>{t.mode=i.PLAYING,t.painted=!1},k=()=>{t.gameObjs.forEach(r=>r.forEach(l=>l.sprite.visible=!1)),t.player.sprite.visible=!1},A=()=>{t.gameObjs.forEach(r=>r.forEach(l=>l.sprite.visible=!0)),t.player.sprite.visible=!0},T=()=>{k(),e.clear(),e.background(220),e.fill(0),e.textSize(32),e.textAlign(e.CENTER),e.text("Help",e.width/2,e.height/2);let r=new b(e,70,100),l=new E(e,70,130),d=new p(e,70,160),P=new O(e,70,190),w=new g(e,70,220,3,m.player),c=new g(e,70,250,3,m.player);c.invulnerable=!0,c.setSprite(c.sprites.invulnerable),w.display(),c.display(),v=[r,l,d,P,w,c],e.textAlign(e.LEFT),e.textSize(16),e.text("Human: tasty!",100,105),e.text("Soldier: beware!",100,135),e.text("Zombie: your babies! (you can ignore them now)",100,165),e.text("Doctor: No worries, but heals zombies back to life",100,195),e.text("Player: Move with arrow keys, bite humans, avoid soldiers",100,225),e.text("Player: after being shot and returning to un-life, you are briefly invulnerable",100,255,300),t.painted=!0},L=()=>{v.forEach(r=>r.sprite?.remove()),v=[],A(),t.painted=!1};e.draw=()=>{if(x(),t.mode===i.ATTRACT){e.background(0),e.fill(255),e.textSize(32),e.textAlign(e.CENTER),e.text("Nova Zombie Simulator",e.width/2,e.height/2),e.text("Click to Start",e.width/2,e.height/2+50);return}if(t.mode===i.PAUSED&&!t.painted){t.painted=!0,e.background(0,50),e.fill(255),e.textSize(32),e.textAlign(e.CENTER),e.text("Paused",e.width/2,e.height/2),e.text("Press 'p' or 'space' to continue",e.width/2,e.height/2+50);return}if(t.mode===i.GAME_OVER&&!t.painted){t.painted=!0,e.background(0,50),e.fill(255),e.textSize(32),e.textAlign(e.CENTER),e.text("Game Over",e.width/2,e.height/2);return}if(t.mode===i.HELP&&!t.painted){T();return}t.mode===i.PLAYING&&a()}});
