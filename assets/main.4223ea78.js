const O=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const c of h.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function i(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerpolicy&&(h.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?h.credentials="include":s.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(s){if(s.ep)return;s.ep=!0;const h=i(s);fetch(s.href,h)}};O();const P="modulepreload",p={},R="",m=function(e,i){return!i||i.length===0?e():Promise.all(i.map(o=>{if(o=`${R}${o}`,o in p)return;p[o]=!0;const s=o.endsWith(".css"),h=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${h}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":P,s||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),s)return new Promise((g,v)=>{c.addEventListener("load",g),c.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())};class L{constructor(e,i){this.ctx=e,this.livesMax=i,this.reset()}reset(){this.x=this.ctx.width/2,this.y=this.ctx.height/2,this.lives=this.livesMax,this.invulnerable=!1}move(){this.ctx.keyIsDown(this.ctx.LEFT_ARROW)&&(this.x-=5),this.ctx.keyIsDown(this.ctx.RIGHT_ARROW)&&(this.x+=5),this.ctx.keyIsDown(this.ctx.UP_ARROW)&&(this.y-=5),this.ctx.keyIsDown(this.ctx.DOWN_ARROW)&&(this.y+=5),this.x<0&&(this.x=this.ctx.width),this.x>this.ctx.width&&(this.x=0),this.y<0&&(this.y=this.ctx.height),this.y>this.ctx.height&&(this.y=0)}display(){this.ctx.fill("purple"),this.ctx.ellipse(this.x,this.y,20,20)}touches(e){return this.ctx.dist(this.x,this.y,e.x,e.y)<20}killed(){this.lives--,this.invulnerable=!0,setTimeout(()=>{this.invulnerable=!1},2e3)}}class y{constructor(e,i,o,s=2,h=.001){this.ctx=e,this.x=i||this.ctx.random(this.ctx.width),this.y=o||this.ctx.random(this.ctx.height),this.noiseOffsetX=this.ctx.random(1e3),this.noiseOffsetY=this.ctx.random(1e3),this.speed=s,this.noiseSpeed=h,this.sprite=new e.Sprite(this.x,this.y,20)}move(){this.x+=this.ctx.map(this.ctx.noise(this.noiseOffsetX),0,1,-this.speed,this.speed),this.y+=this.ctx.map(this.ctx.noise(this.noiseOffsetY),0,1,-this.speed,this.speed),this.noiseOffsetX+=this.noiseSpeed,this.noiseOffsetY+=this.noiseSpeed,this.x<0&&(this.x=this.ctx.width),this.x>this.ctx.width&&(this.x=0),this.y<0&&(this.y=this.ctx.height),this.y>this.ctx.height&&(this.y=0)}display(){this.sprite.x=this.x,this.sprite.y=this.y}touches(e){return this.ctx.dist(this.x,this.y,e.x,e.y)<20}proximityTo(e){return this.ctx.dist(this.x,this.y,e.x,e.y)}}class k extends y{constructor(e,i,o,s,h){super(e,i,o,s,h),this.x=this.ctx.random(this.ctx.width),this.y=this.ctx.random(this.ctx.height),this.sprite.text="\u272D",this.sprite.textSize=20,this.sprite.textColor="yellow",this.sprite.color="olive"}move(e,i){if(super.move(),this.proximityTo(e)<200){let o=this.ctx.atan2(e.y-this.y,e.x-this.x);this.x+=this.ctx.cos(o)*2,this.y+=this.ctx.sin(o)*2}for(let o of i)if(this.proximityTo(o)<200){let s=this.ctx.atan2(this.y-o.y,this.x-o.x);this.x-=this.ctx.cos(s)*2,this.y-=this.ctx.sin(s)*2;break}}}class w extends y{constructor(e,i,o,s,h){return super(e,i,o,s,h),this.sprite.text="\u{1F922}",this.sprite.textSize=20,this.sprite.textColor="white",this.sprite.color="blue",this}move(e,i,o){super.move();for(let s of e)if(this.proximityTo(s)<50){let h=this.ctx.atan2(this.y-s.y,this.x-s.x);this.x+=this.ctx.cos(h)*2,this.y+=this.ctx.sin(h)*2;break}for(let s of o)if(this.proximityTo(s)<50){let h=this.ctx.atan2(this.y-s.y,this.x-s.x);this.x+=this.ctx.cos(h)*2,this.y+=this.ctx.sin(h)*2;break}for(let s of i)if(this.proximityTo(s)<100){let h=this.ctx.atan2(s.y-this.y,s.x-this.x);this.x+=this.ctx.cos(h)*3,this.y+=this.ctx.sin(h)*3;break}}}class b extends y{constructor(e,i,o,s,h){super(e,i,o,s,h),this.sprite.image="\u{1F603}"}move(e,i){super.move(),this.x+=this.ctx.map(this.ctx.noise(this.noiseOffsetX),0,1,-2,2),this.y+=this.ctx.map(this.ctx.noise(this.noiseOffsetY),0,1,-2,2),this.noiseOffsetX+=.001,this.noiseOffsetY+=.001,this.x<0&&(this.x=this.ctx.width),this.x>this.ctx.width&&(this.x=0),this.y<0&&(this.y=this.ctx.height),this.y>this.ctx.height&&(this.y=0);for(let o of e)if(this.ctx.dist(this.x,this.y,o.x,o.y)<50){this.x+=(this.x-o.x)*.05,this.y+=(this.y-o.y)*.05;break}this.ctx.dist(this.x,this.y,i.x,i.y)<50&&(this.x+=(this.x-i.x)*.05,this.y+=(this.y-i.y)*.05)}display(){this.sprite.x=this.x,this.sprite.y=this.y}}class D extends y{constructor(e,i,o,s,h){super(e,i,o,s,h),this.x=this.ctx.random(this.ctx.width),this.y=this.ctx.random(this.ctx.height),this.sprite.image="\u26D1",this.waiting=!1}move(e){if(!this.waiting){super.move();for(let i of e)if(this.proximityTo(i)<100){let o=this.ctx.atan2(this.y-i.y,this.x-i.x);this.x-=this.ctx.cos(o)*5,this.y-=this.ctx.sin(o)*5;break}}}wait(){this.waiting=!0,setTimeout(()=>this.waiting=!1,3e3)}}await m(()=>import("./index.db9e016b.js"),["assets/index.db9e016b.js","assets/_commonjsHelpers.88e99c8f.js"]);window.planck=await m(()=>import("./planck.21b3dc8b.js"),[]);await m(()=>import("./p5play.eb70780b.js").then(function(t){return t.p}),["assets/p5play.eb70780b.js","assets/_commonjsHelpers.88e99c8f.js"]);await m(()=>import("./sound.a1c9346d.js"),[]);let f,x=[],l=[],d=[],u=[],E=2,A=12,C=1,a={};new p5(t=>{t.preload=()=>{a.scream=t.loadSound("audio/64940__syna-max__wilhelm_scream.wav"),a.gunshot=t.loadSound("audio/128297__xenonn__layered-gunshot-7.wav"),a.crunch=t.loadSound("audio/524609__clearwavsound__bone-crunch.wav"),a.thing=t.loadSound("audio/425941__jarethorin__loopy-thing.wav"),a.heal=t.loadSound("audio/578581__nomiqbomi__tremolo-strings-2.mp3"),a.nomnom=t.loadSound("audio/543386__thedragonsspark__nom-noise.wav"),a.bite=t.loadSound("audio/353067__jofae__bite-cartoon-style.mp3")};const e={HELP:"help",PLAYING:"playing",PAUSED:"paused",GAME_OVER:"game over",ATTRACT:"attract"};let i={mode:e.ATTRACT,score:0,level:0,livesMax:3,painted:!1};function o(){let n=[x,l,u,d];for(const r of n)for(const _ of r)_.sprite.remove();x=[],l=[],d=[],u=[];for(let r=0;r<A;r++)x.push(new b(t,null,null));for(let r=0;r<E;r++)d.push(new k(t,null,null,-2.5,.02));for(let r=0;r<C;r++)u.push(new D(t,null,null,-2.5,.001));i.level++,i.level%2===0&&(E++,A+=2)}function s(){f=new L(t,i.livesMax),i.level=0,i.score=0,o(),i.mode=e.PLAYING,a.thing&&(a.thing.setVolume(1),a.thing.loop())}function h(){t.fill(0),t.textSize(24),t.textAlign(t.LEFT),t.text("Score: "+i.score,10,30),t.text("Round: "+i.level,10,60),t.text(`Lives: ${f.lives}`,10,90)}function c(){if(i.painted=!1,t.background(220),f.move(),f.display(),f.lives<=0){i.mode=e.GAME_OVER,a.scream.play();return}for(let n of x)n.move(l,f),n.display(),f.touches(n)&&(a.bite.play(),n.sprite.remove(),l.push(new w(t,n.x,n.y)),x.splice(x.indexOf(n),1),i.score++);for(let n of l){n.move(d,x,u),n.display();for(let r of x)n.touches(r)&&(a.nomnom.play(),r.sprite.remove(),l.push(new w(t,r.x,r.y)),x.splice(x.indexOf(r),1))}for(let n of d){n.move(f,l),n.display(),n.touches(f)&&!f.invulnerable&&f.killed();for(let r of l)n.touches(r)&&(a.gunshot.play(),r.sprite.remove(),l.splice(l.indexOf(r),1))}for(let n of u){n.move(l),n.display();for(let r of l)!n.waiting&&n.touches(r)&&(n.wait(),a.heal.play(),r.sprite.remove(),x.push(new b(t,r.x,r.y)),l.splice(l.indexOf(r),1))}x.length===0&&o(),h()}t.setup=()=>{let n=t.createCanvas(600,600);t.frameRate(30),t.noStroke(),t.textStyle(t.BOLD);let r=t.createButton("Start");r.position(n.offsetLeft,n.offsetTop+n.offsetHeight+10),r.mousePressed(s)},t.mousePressed=()=>{i.mode===e.ATTRACT&&s()};function g(){t.kb.pressed("p")||t.kb.pressed(" ")?i.mode===e.PLAYING?v():i.mode===e.PAUSED&&S():i.mode===e.GAME_OVER?s():i.mode===e.HELP&&(i.mode=e.ATTRACT)}const v=()=>{i.mode=e.PAUSED,console.log("PAUSED")},S=()=>{i.mode=e.PLAYING,i.painted=!1,console.log("UNPAUSED")},T=()=>{let n=[x,l,u,d];for(const r of n)for(const _ of r)_.sprite.visible=!1;t.background(0),t.fill(255),t.textSize(32),t.textAlign(t.CENTER),t.text("Help",t.width/2,t.height/2)};t.draw=()=>{if(g(),i.mode===e.ATTRACT){t.background(0),t.fill(255),t.textSize(32),t.textAlign(t.CENTER),t.text("Nova Zombie Simulator",t.width/2,t.height/2),t.text("Click to Start",t.width/2,t.height/2+50);return}if(i.mode===e.PAUSED&&!i.painted){i.painted=!0,t.background(0,50),t.fill(255),t.textSize(32),t.textAlign(t.CENTER),t.text("Paused",t.width/2,t.height/2),t.text("Press 'p' or 'space' to continue",t.width/2,t.height/2+50);return}if(i.mode===e.GAME_OVER&&!i.painted){i.painted=!0,t.background(0,50),t.fill(255),t.textSize(32),t.textAlign(t.CENTER),t.text("Game Over",t.width/2,t.height/2);return}if(i.mode===e.HELP&&!i.painted){i.painted=!0,T();return}i.mode===e.PLAYING&&c()}});
